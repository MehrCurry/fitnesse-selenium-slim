<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>SeleniumFixture.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">fitnesse-selenium-slim</a> &gt; <a href="index.source.html" class="el_package">com.github.andreptb.fitnesse</a> &gt; <span class="el_source">SeleniumFixture.java</span></div><h1>SeleniumFixture.java</h1><pre class="source lang-java linenums">
package com.github.andreptb.fitnesse;

import java.io.File;
import java.io.IOException;
import java.net.MalformedURLException;
import java.util.Iterator;

import org.apache.commons.collections.CollectionUtils;
import org.apache.commons.io.FileUtils;
import org.apache.commons.io.FilenameUtils;
import org.apache.commons.lang.ObjectUtils;
import org.apache.commons.lang.StringUtils;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.TakesScreenshot;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;

import com.github.andreptb.fitnesse.util.FitnesseMarkup;
import com.github.andreptb.fitnesse.util.FixtureWebDriverProvider;
import com.github.andreptb.fitnesse.util.SeleniumElementFinder;

import fitnesse.ContextConfigurator;

/**
 * Slim fixture to execute Selenium commands, see README.md for more information.
 */
<span class="fc" id="L29">public class SeleniumFixture {</span>

	/**
	 * Constant representing the selector of the current element focused
	 */
	private static final String CURRENT_ELEMENT_FOCUSED = StringUtils.EMPTY;

	/**
	 * Selenium Web Driver, static so the same DRIVER instance can be used through multiple tables
	 */
	private static WebDriver DRIVER;
	/**
	 * Timeout time to wait for elements to be present. Default is 20 seconds
	 */
<span class="fc" id="L43">	private static int WAIT_TIMEOUT = 20;</span>
	/**
	 * Screenshot dir to save
	 */
<span class="fc" id="L47">	private static String SCREENSHOT_DIR = ContextConfigurator.DEFAULT_ROOT + &quot;/files/screenshots&quot;;</span>

	/**
	 * Utility to help creating WebDriver instances
	 */
<span class="fc" id="L52">	private FixtureWebDriverProvider driverProvider = new FixtureWebDriverProvider();</span>
	/**
	 * Utility to help finding web elements with provided selector
	 */
<span class="fc" id="L56">	private SeleniumElementFinder elementFinder = new SeleniumElementFinder();</span>
	/**
	 * Utility to process FitNesse markup so can be used by Selenium WebDriver
	 */
<span class="fc" id="L60">	private FitnesseMarkup fitnesseMarkup = new FitnesseMarkup();</span>

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | start browser | &lt;i&gt;browser&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Registers the DRIVER to further execute selenium commands
	 *
	 * @see #startBrowserWith(String, String)
	 * @param browser The browser to be used
	 * @return result Boolean result indication of assertion/operation
	 * @throws MalformedURLException if the remote driver has a malformed URL
	 * @throws ReflectiveOperationException if remote driver class cannot be instantiated
	 */
	public boolean startBrowser(String browser) throws ReflectiveOperationException, MalformedURLException {
<span class="nc" id="L77">		return startBrowserWith(browser, null);</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | start browser | &lt;i&gt;browser&lt;/i&gt; | with | &lt;i&gt;capabilities&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Registers the DRIVER to further execute selenium commands. Capabilities should be informed in the following format:
	 * &lt;p&gt;
	 * name='some test' platform='LINUX' version='xx'
	 * &lt;/p&gt;
	 * This format was used instead of regular json format since FitNesse uses brackets for variables. Quotes between values must be used
	 *
	 * @see FixtureWebDriverProvider#createDriver(String, String)
	 * @param browser The browser to be used
	 * @param capabilities Usually used to configure remote driver, but some local driver also uses. For example: name='some test' platform='LINUX' version='xx'
	 * @return result Boolean result indication of assertion/operation
	 * @throws MalformedURLException if the remote driver has a malformed URL
	 * @throws ReflectiveOperationException if remote driver class cannot be instantiated
	 */
	public boolean startBrowserWith(String browser, String capabilities) throws ReflectiveOperationException, MalformedURLException {
<span class="fc" id="L100">		WebDriver driver = this.driverProvider.createDriver(browser, capabilities);</span>
<span class="pc bpc" id="L101" title="1 of 2 branches missed.">		if (driver == null) {</span>
<span class="nc" id="L102">			return false;</span>
		}
<span class="fc" id="L104">		quit();</span>
<span class="fc" id="L105">		SeleniumFixture.DRIVER = driver;</span>
<span class="fc" id="L106">		return true;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | ensure | browser available |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Returns if browser is available and can be used
	 *
	 * @return browserStarted
	 */
	public boolean browserAvailable() {
		// http://stackoverflow.com/questions/27616470/webdriver-how-to-check-if-browser-still-exists-or-still-open
<span class="fc" id="L121">		String driverString = ObjectUtils.toString(SeleniumFixture.DRIVER);</span>
<span class="pc bpc" id="L122" title="2 of 4 branches missed.">		return StringUtils.isNotBlank(driverString) &amp;&amp; !StringUtils.containsIgnoreCase(driverString, &quot;null&quot;);</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | $previousTimeout= | set wait timeout | &lt;i&gt;timeout in seconds&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Sets the time to wait while finding an element.
	 *
	 * @param timeoutInSeconds wait seconds to timeout
	 * @return previous timeout value
	 */
	public int setWaitTimeout(int timeoutInSeconds) {
<span class="fc" id="L137">		int previousTimeout = SeleniumFixture.WAIT_TIMEOUT;</span>
<span class="fc" id="L138">		SeleniumFixture.WAIT_TIMEOUT = timeoutInSeconds;</span>
<span class="fc" id="L139">		return previousTimeout;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | open | &lt;i&gt;url&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Navigates to the the desired url
	 *
	 * @param url to navigate
	 * @return result Boolean result indication of assertion/operation
	 */
	public boolean open(String url) {
<span class="pc bpc" id="L154" title="1 of 2 branches missed.">		if (browserAvailable()) {</span>
<span class="fc" id="L155">			SeleniumFixture.DRIVER.get(this.fitnesseMarkup.clean(url));</span>
<span class="fc" id="L156">			return true;</span>
		}
<span class="nc" id="L158">		return false;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | check | current url | &lt;i&gt;url&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 *
	 * @return current url defined in browser
	 */
	public String currentUrl() {
<span class="pc bpc" id="L171" title="1 of 2 branches missed.">		if (browserAvailable()) {</span>
<span class="fc" id="L172">			return SeleniumFixture.DRIVER.getCurrentUrl();</span>
		}
<span class="nc" id="L174">		return null;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | open window | &lt;i&gt;url&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Opens a popup window with desired &lt;i&gt;url&lt;/i&gt;. After opening the window, you'll need to select it using the selectWindow command.
	 *
	 * @see #selectWindow(String)
	 * @param url to navigate
	 * @return result Boolean result indication of assertion/operation
	 */
	public boolean openWindow(String url) {
<span class="pc bpc" id="L190" title="1 of 2 branches missed.">		if (!browserAvailable()) {</span>
<span class="nc" id="L191">			return false;</span>
		}
<span class="pc bpc" id="L193" title="1 of 2 branches missed.">		if (CollectionUtils.isEmpty(SeleniumFixture.DRIVER.getWindowHandles())) {</span>
<span class="nc" id="L194">			return open(url);</span>
		}
<span class="pc bpc" id="L196" title="1 of 2 branches missed.">		if (SeleniumFixture.DRIVER instanceof JavascriptExecutor) {</span>
<span class="fc" id="L197">			((JavascriptExecutor) SeleniumFixture.DRIVER).executeScript(&quot;window.open(arguments[0])&quot;, this.fitnesseMarkup.clean(url));</span>
<span class="fc" id="L198">			return true;</span>
		}
<span class="nc" id="L200">		return false;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | select window | &lt;i&gt;locator&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Selects a popup window using a window locator; once a popup window has been selected, all commands go to that window.
	 * Currently supports window search by nameOrHandle, title and current url
	 *
	 * @param locator an element locator
	 * @return result Boolean result indication of assertion/operation
	 */
	public boolean selectWindow(String locator) {
<span class="pc bpc" id="L216" title="1 of 2 branches missed.">		if (!browserAvailable()) {</span>
<span class="nc" id="L217">			return false;</span>
		}
<span class="fc" id="L219">		String currentWindow = SeleniumFixture.DRIVER.getWindowHandle();</span>
<span class="pc bpc" id="L220" title="1 of 2 branches missed.">		for (String windowId : SeleniumFixture.DRIVER.getWindowHandles()) {</span>
<span class="fc" id="L221">			WebDriver window = SeleniumFixture.DRIVER.switchTo().window(windowId);</span>
<span class="fc bfc" id="L222" title="All 6 branches covered.">			if (this.fitnesseMarkup.compare(locator, windowId) || this.fitnesseMarkup.compare(locator, window.getTitle()) || this.fitnesseMarkup.compare(locator, window.getCurrentUrl())) {</span>
<span class="fc" id="L223">				return true;</span>
			}
		}
		// if title didn't match anything go back to current window
<span class="nc bnc" id="L227" title="All 2 branches missed.">		if (currentWindow != null) {</span>
<span class="nc" id="L228">			SeleniumFixture.DRIVER.switchTo().window(currentWindow);</span>
		}
<span class="nc" id="L230">		return false;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | current window |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Returns current window ID. Returns &quot;null&quot; if no window is available
	 *
	 * @return windowID
	 */
	public String currentWindow() {
<span class="pc bpc" id="L244" title="1 of 2 branches missed.">		if (browserAvailable()) {</span>
<span class="fc" id="L245">			return SeleniumFixture.DRIVER.getWindowHandle();</span>
		}
<span class="nc" id="L247">		return null;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | check | title | &lt;i&gt;title&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Current page title
	 *
	 * @return result Boolean result indication of assertion/operation
	 */
	public String title() {
<span class="pc bpc" id="L261" title="1 of 2 branches missed.">		if (browserAvailable()) {</span>
<span class="fc" id="L262">			return SeleniumFixture.DRIVER.getTitle();</span>
		}
<span class="nc" id="L264">		return null;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | close |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Closes the last tab
	 *
	 * @return result Boolean result indication of assertion/operation
	 */
	public boolean close() {
<span class="pc bpc" id="L278" title="1 of 2 branches missed.">		if (browserAvailable()) {</span>
<span class="fc" id="L279">			SeleniumFixture.DRIVER.close();</span>
<span class="fc" id="L280">			Iterator&lt;String&gt; currentWindows = SeleniumFixture.DRIVER.getWindowHandles().iterator();</span>
<span class="pc bpc" id="L281" title="1 of 2 branches missed.">			if (currentWindows.hasNext()) {</span>
				// if there's still windows opened focus anyone that's still opened
<span class="fc" id="L283">				SeleniumFixture.DRIVER.switchTo().window(currentWindows.next());</span>
			}
<span class="fc" id="L285">			return true;</span>
		}
<span class="nc" id="L287">		return false;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | quit |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Quits driver instance, closing all associated windows
	 *
	 * @return result Boolean result indication of assertion/operation
	 */
	public boolean quit() {
		try {
<span class="fc" id="L302">			SeleniumFixture.DRIVER.quit();</span>
<span class="fc" id="L303">			SeleniumFixture.DRIVER = null;</span>
<span class="fc" id="L304">			return true;</span>
<span class="fc" id="L305">		} catch (Throwable e) {</span>
			// quietly quit driver
		}
<span class="fc" id="L308">		return false;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | type | &lt;i&gt;value&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Sets the value of the current focused input field, as though you typed it in.
	 * Can also be used to set the value of combo boxes, check boxes, etc. In these cases, value should be the value of the option selected, not the visible text.
	 *
	 * @param value the value to typeIn
	 * @return result Boolean result indication of assertion/operation
	 */
	public boolean type(String value) {
<span class="fc" id="L324">		return typeIn(value, SeleniumFixture.CURRENT_ELEMENT_FOCUSED);</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | type | &lt;i&gt;value&lt;/i&gt; | in | &lt;i&gt;locator&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Sets the value of an input field, as though you typed it in.
	 * Can also be used to set the value of combo boxes, check boxes, etc. In these cases, value should be the value of the option selected, not the visible text.
	 *
	 * @param value the value to typeIn
	 * @param locator an element locator
	 * @return result Boolean result indication of assertion/operation
	 */
	public boolean typeIn(String value, String locator) {
<span class="pc bpc" id="L341" title="1 of 2 branches missed.">		if (!browserAvailable()) {</span>
<span class="nc" id="L342">			return false;</span>
		}
<span class="fc" id="L344">		WebElement element = this.elementFinder.findToInput(SeleniumFixture.DRIVER, locator, SeleniumFixture.WAIT_TIMEOUT);</span>
<span class="fc" id="L345">		String cleanedValue = this.fitnesseMarkup.clean(value);</span>
<span class="fc" id="L346">		element.clear();</span>
<span class="pc bpc" id="L347" title="1 of 2 branches missed.">		if (StringUtils.isNotBlank(cleanedValue)) {</span>
<span class="fc" id="L348">			element.sendKeys(cleanedValue);;</span>
		}
<span class="fc" id="L350">		return true;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | send keys | &lt;i&gt;value&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Simulates keystroke events on the current focused element, as though you typed the value key-by-key.
	 * This simulates a real user typing every character in the specified string; it is also bound by the limitations of a real user, like not being able to type into a invisible or read only
	 * elements. This is useful for dynamic UI widgets (like auto-completing combo boxes) that require explicit key events.
	 * Unlike the simple &quot;type&quot; command, which forces the specified value into the page directly, this command will not replace the existing content. If you want to replace the existing contents, you
	 * need to use the simple &quot;type&quot; command to set the value of the field to empty string to clear the field and then the &quot;sendKeys&quot; command to send the keystroke for what you want to type.
	 *
	 * @param value the value to typeIn
	 * @return result Boolean result indication of assertion/operation
	 */
	public boolean sendKeys(String value) {
<span class="fc" id="L369">		return sendKeysIn(value, SeleniumFixture.CURRENT_ELEMENT_FOCUSED);</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | send keys | &lt;i&gt;value&lt;/i&gt; | in | &lt;i&gt;locator&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Simulates keystroke events on the specified element, as though you typed the value key-by-key.
	 * This simulates a real user typing every character in the specified string; it is also bound by the limitations of a real user, like not being able to type into a invisible or read only
	 * elements. This is useful for dynamic UI widgets (like auto-completing combo boxes) that require explicit key events.
	 * Unlike the simple &quot;type&quot; command, which forces the specified value into the page directly, this command will not replace the existing content. If you want to replace the existing contents, you
	 * need to use the simple &quot;type&quot; command to set the value of the field to empty string to clear the field and then the &quot;sendKeys&quot; command to send the keystroke for what you want to type.
	 *
	 * @param value the value to typeIn
	 * @param locator an element locator
	 * @return result Boolean result indication of assertion/operation
	 */
	public boolean sendKeysIn(String value, String locator) {
<span class="pc bpc" id="L389" title="1 of 2 branches missed.">		if (!browserAvailable()) {</span>
<span class="nc" id="L390">			return false;</span>
		}
<span class="fc" id="L392">		this.elementFinder.findToInput(SeleniumFixture.DRIVER, locator, SeleniumFixture.WAIT_TIMEOUT).sendKeys(this.fitnesseMarkup.clean(value));</span>
<span class="fc" id="L393">		return true;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | click |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Clicks on the current focused link, button, checkbox or radio button.
	 *
	 * @return result Boolean result indication of assertion/operation
	 */
	public boolean click() {
<span class="nc" id="L407">		return click(SeleniumFixture.CURRENT_ELEMENT_FOCUSED);</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | click | &lt;i&gt;locator&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Clicks on a link, button, checkbox or radio button. If the click action causes a new page to load (like a link usually does), call waitForPageToLoad.
	 *
	 * @param locator an element locator
	 * @return result Boolean result indication of assertion/operation
	 */
	public boolean click(String locator) {
<span class="pc bpc" id="L422" title="1 of 2 branches missed.">		if (browserAvailable()) {</span>
<span class="fc" id="L423">			this.elementFinder.findToInput(SeleniumFixture.DRIVER, locator, SeleniumFixture.WAIT_TIMEOUT).click();</span>
<span class="fc" id="L424">			return true;</span>
		}
<span class="nc" id="L426">		return false;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | check | value | &lt;i&gt;locator&lt;/i&gt; | &lt;i&gt;expectedValue&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Gets the (whitespace-trimmed) value of an input field (or anything else with a value parameter). For checkbox/radio elements, the value will be &quot;on&quot; or &quot;off&quot; depending on whether the element is
	 * checked or not.
	 *
	 * @param locator an element locator
	 * @return value associated with the locator
	 */
	public String value(String locator) {
<span class="pc bpc" id="L442" title="1 of 2 branches missed.">		if (browserAvailable()) {</span>
<span class="fc" id="L443">			return this.elementFinder.findValue(SeleniumFixture.DRIVER, locator, SeleniumFixture.WAIT_TIMEOUT);</span>
		}
<span class="nc" id="L445">		return null;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | check | &lt;i&gt;value&lt;/i&gt; | &lt;i&gt;attributeLocator&lt;/i&gt; | &lt;i&gt;expectedValue&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Gets the value of an element attribute. The value of the attribute may differ across browsers (this is the case for the &quot;style&quot; attribute, for example).
	 *
	 * @param attributeLocator an element locator followed by an @ sign and then the name of the attribute, e.g. &quot;foo@bar&quot;
	 * @return attributeValue the value of the specified attribute
	 * @throws IllegalArgumentException if locator do not contain an attribute part such as &quot;id=&amp;lt;id&amp;gt;@&amp;lt;attributeName&amp;gt;&quot;
	 */
	public String attribute(String attributeLocator) {
<span class="pc bpc" id="L461" title="1 of 2 branches missed.">		if (!browserAvailable()) {</span>
<span class="nc" id="L462">			return null;</span>
		}
<span class="fc" id="L464">		return this.elementFinder.findAttribute(SeleniumFixture.DRIVER, attributeLocator, SeleniumFixture.WAIT_TIMEOUT);</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | check | text | &lt;i&gt;locator&lt;/i&gt; | &lt;i&gt;expectedValue&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Gets the text of an element. This works for any element that contains text. This command uses either the textContent (Mozilla-like browsers) or the innerText (IE-like browsers) of the element,
	 * which is the rendered text shown to the user.
	 *
	 * @param locator an element locator
	 * @return text associated with the locator
	 */
	public String text(String locator) {
<span class="pc bpc" id="L480" title="1 of 2 branches missed.">		if (browserAvailable()) {</span>
<span class="fc" id="L481">			return this.elementFinder.findText(SeleniumFixture.DRIVER, locator, SeleniumFixture.WAIT_TIMEOUT);</span>
		}
<span class="nc" id="L483">		return null;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | show | screenshot |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Takes screenshot from current browser state and returns to be previewed in test result page.
	 *
	 * @return screenshot saved file absolute path
	 * @throws IOException if something goes wrong while manipulating screenshot file
	 */
	public String screenshot() throws IOException {
<span class="pc bpc" id="L498" title="1 of 2 branches missed.">		if (!browserAvailable()) {</span>
<span class="nc" id="L499">			return null;</span>
		}
<span class="pc bpc" id="L501" title="1 of 2 branches missed.">		if (SeleniumFixture.DRIVER instanceof TakesScreenshot) {</span>
<span class="fc" id="L502">			File src = ((TakesScreenshot) SeleniumFixture.DRIVER).getScreenshotAs(OutputType.FILE);</span>
<span class="fc" id="L503">			File dest = new File(SeleniumFixture.SCREENSHOT_DIR, src.getName());</span>
<span class="fc" id="L504">			FileUtils.moveFile(src, dest);</span>
<span class="fc" id="L505">			return dest.getAbsolutePath();</span>
		}
<span class="nc" id="L507">		return null;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | set screenshot dir | &lt;i&gt;dir&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Takes screenshot from current browser state and returns to be previewed in test result page.
	 * This method can be removed when &lt;a href=&quot;https://github.com/unclebob/fitnesse/pull/755&quot;&gt;this issue&lt;/a&gt; is resolved
	 *
	 * @param dest directory to save screenshot
	 * @return result Boolean result indication of assertion/operation
	 */
	public boolean setScreenshotDir(String dest) {
<span class="fc" id="L523">		SeleniumFixture.SCREENSHOT_DIR = FilenameUtils.normalize(this.fitnesseMarkup.clean(dest));</span>
<span class="fc" id="L524">		return true;</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | ensure | present | &lt;i&gt;locator&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Verifies that the specified element is somewhere on the page.
	 * There's a little difference from SeleniumIDE version, this method also supports attributes, if the selector is something like &quot;id=&amp;lt;id&amp;gt;@&amp;lt;attributeName&amp;gt;&quot;,
	 * this method will return true if the attribute exists on the element with any value.
	 *
	 * @param locator an element locator
	 * @return result Boolean result indication of assertion/operation
	 */
	public boolean present(String locator) {
<span class="pc bpc" id="L541" title="1 of 2 branches missed.">		if (!browserAvailable()) {</span>
<span class="nc" id="L542">			return false;</span>
		}
<span class="fc" id="L544">		return this.elementFinder.presentOrAbsent(SeleniumFixture.DRIVER, locator, SeleniumFixture.WAIT_TIMEOUT, true);</span>
	}

	/**
	 * &lt;p&gt;
	 * &lt;code&gt;
	 * | ensure | not present | &lt;i&gt;locator&lt;/i&gt; |
	 * &lt;/code&gt;
	 * &lt;/p&gt;
	 * Verifies that the specified element is not somewhere on the page.
	 * There's a little difference from SeleniumIDE version, this method also supports attributes, if the selector is something like &quot;id=&amp;lt;id&amp;gt;@&amp;lt;attributeName&amp;gt;&quot;,
	 * this method will return true if the attribute don't exists on the element with any value.
	 *
	 * @param locator an element locator
	 * @return result Boolean result indication of assertion/operation
	 */
	public boolean notPresent(String locator) {
<span class="pc bpc" id="L561" title="1 of 2 branches missed.">		if (!browserAvailable()) {</span>
<span class="nc" id="L562">			return false;</span>
		}
<span class="fc" id="L564">		return this.elementFinder.presentOrAbsent(SeleniumFixture.DRIVER, locator, SeleniumFixture.WAIT_TIMEOUT, false);</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>